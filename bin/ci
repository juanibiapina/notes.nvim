#!/usr/bin/env bash

# CI script that runs tests and linting
set -e

echo "Running CI checks for notes.nvim..."
echo "======================================"

# Run linting
echo "1. Running luacheck (static analysis)..."
if ! luacheck .; then
    echo "âŒ Luacheck failed!"
    exit 1
fi
echo "âœ… Luacheck passed!"

echo ""
echo "2. Running stylua (code formatting check)..."
if ! stylua --check .; then
    echo "âŒ Stylua formatting check failed!"
    echo "ğŸ’¡ Run 'stylua .' to auto-fix formatting issues"
    exit 1
fi
echo "âœ… Stylua formatting check passed!"

echo ""
echo "3. Running tests..."
if ! ./bin/test; then
    echo "âŒ Tests failed!"
    exit 1
fi
echo "âœ… Tests passed!"

echo ""
echo "ğŸ‰ All CI checks passed!"